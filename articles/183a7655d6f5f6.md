---
title: "react-simple-mapsã®æ´»ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³é›†"
emoji: "ğŸ—ºï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['react' , 'map']
published: true
---

## ã¯ã˜ã‚ã«

`react-simple-maps` ã¯ã€React ã§ç°¡å˜ã«ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªåœ°å›³ã‚’ä½œæˆã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

https://www.react-simple-maps.io/

ã“ã®è¨˜äº‹ã§ã¯ `react-simple-maps` ã§ã§ãã‚‹ã“ã¨ã¨ã€ãã®å®Ÿè£…æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™ï¼š
- åŸºæœ¬çš„ãªä¸–ç•Œåœ°å›³ã®è¡¨ç¤º
- ãƒãƒ¼ã‚«ãƒ¼ã®è¿½åŠ ã‚„åœ°åŸŸã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½
- ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–


èª¬æ˜ã‚’é£›ã°ã—ãŸã„æ–¹ã¯[ä»Šå›ã®ãƒ¬ãƒã‚¸ãƒˆãƒª](https://github.com/melodyclue/zenn-world-map)ã€[Exampleãƒšãƒ¼ã‚¸](https://zenn-world-map.vercel.app/)ã‚’ã”è¦§ãã ã•ã„ã€‚

## ç’°å¢ƒæ§‹ç¯‰

### å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä»Šå›ä½¿ç”¨ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
# Reactç”¨ã®åœ°å›³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
pnpm add react-simple-maps

# TypeScriptç”¨ã®å‹å®šç¾©
pnpm add -D @types/react-simple-maps
```

### åœ°å›³ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™

ä»Šå›ã¯ã€TopoJSON å½¢å¼ã®åœ°å›³ãƒ‡ãƒ¼ã‚¿ã‚’ä»¥ä¸‹ã®æ‰‹é †ã§ä½¿ç”¨ã—ã¾ã™ã€‚

1. [Natural Earth](https://www.naturalearthdata.com/downloads/10m-cultural-vectors/) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. Admin 0 â€“ Countries ã®ã€ŒDownload countriesã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
3. è§£å‡å¾Œã€ä»¥ä¸‹ã® 3 ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªï¼š
   - ne_10m_admin_0_countries.shpï¼ˆåœ°ç†ãƒ‡ãƒ¼ã‚¿æœ¬ä½“ï¼‰
   - ne_10m_admin_0_countries.prjï¼ˆæŠ•å½±æ³•æƒ…å ±ï¼‰
   - ne_10m_admin_0_countries.dbfï¼ˆå±æ€§ãƒ‡ãƒ¼ã‚¿ï¼‰

4. [mapshaper](https://mapshaper.org/) ã§ä¸Šè¨˜3ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã¾ã¨ã‚ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ç”»åƒã®ã‚ˆã†ã«ä¸–ç•Œåœ°å›³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™

![mapshaper](https://storage.googleapis.com/zenn-user-upload/d9e02edb6e09-20250605.png)

5. å³ä¸Šã®ã€ŒExportã€â†’ File format ã‚’ã€ŒTopoJSONã€ã«å¤‰æ›´
6. ã€Œsave to clipboardã€ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ Export
7. å‡ºåŠ›ã•ã‚ŒãŸ TopoJSON ã‚’ `public/world.json` ã¨ã—ã¦ä¿å­˜

![mapshaper-export](https://storage.googleapis.com/zenn-user-upload/ceb1719b9ae5-20250605.png)

## åŸºæœ¬çš„ãªä¸–ç•Œåœ°å›³ã®è¡¨ç¤º

ã¾ãšã¯ã‚·ãƒ³ãƒ—ãƒ«ãªä¸–ç•Œåœ°å›³ã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã™ã€‚

```tsx
'use client'

import React from 'react'
import { ComposableMap, Geographies, Geography } from 'react-simple-maps'

export const WorldMap = () => {
  return (
    <ComposableMap
      projectionConfig={{
        scale: 180,  // åœ°å›³ã®æ‹¡å¤§ç‡
      }}
      style={{
        width: '740px',
        height: 'auto',
        backgroundColor: '#f8f9fa',
        border: '1px solid #dee2e6',
      }}
    >
      <Geographies geography="/world.json">
        {({ geographies }) =>
          geographies.map(geo => (
            <Geography
              key={geo.rsmKey}
              geography={geo}
              fill="#C2C4C6"
              stroke="#dee2e6"
              strokeWidth={0.5}
              style={{
                default: {
                  fill: '#C2C4C6',
                  stroke: '#dee2e6',
                  strokeWidth: 0.5,
                  outline: 'none',
                },
                hover: {
                  fill: '#d6d6d6',
                  stroke: '#dee2e6',
                  strokeWidth: 0.5,
                  outline: 'none',
                },
                pressed: {
                  fill: '#c0c0c0',
                  stroke: '#dee2e6',
                  strokeWidth: 0.5,
                  outline: 'none',
                },
              }}
            />
          ))
        }
      </Geographies>
    </ComposableMap>
  )
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ä»¥ä¸‹ã®ã‚ˆã†ãªåœ°å›³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š
- `ComposableMap`: åœ°å›³å…¨ä½“ã®ã‚³ãƒ³ãƒ†ãƒŠã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `Geographies`: TopoJSON ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§åœ°ç†æƒ…å ±ã‚’æä¾›
- `Geography`: å„å›½ã‚’è¡¨ã™å€‹åˆ¥ã®åœ°ç†è¦ç´ 

![world-map](https://storage.googleapis.com/zenn-user-upload/c22f01d85c97-20250605.png)

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã®æ–¹æ³•

### ãƒãƒ¼ã‚«ãƒ¼ã‚’è¿½åŠ ã™ã‚‹

ç‰¹å®šã®ä½ç½®ã«ãƒãƒ¼ã‚«ãƒ¼ã‚’é…ç½®ã—ã¦ã€éƒ½å¸‚ã‚„é‡è¦ãªåœ°ç‚¹ã‚’è¡¨ç¤ºã§ãã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€æ±äº¬éƒ½ã¨ãƒ‹ãƒ¥ãƒ¼ãƒ¨ãƒ¼ã‚¯ã®ãƒãƒ¼ã‚«ãƒ¼ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

```tsx
import { Marker } from 'react-simple-maps'

const markers = [
  { name: "Tokyo", coordinates: [139.6503, 35.6762] },
  { name: "New York", coordinates: [-74.006, 40.7128] },
]

// ComposableMap å†…ã«è¿½åŠ 
{markers.map(({ name, coordinates }) => (
  <Marker key={name} coordinates={coordinates}>
    <circle r={3} fill="#F00" />
    <text textAnchor="middle" y={-10} style={{ fontSize: 10 }}>
      {name}
    </text>
  </Marker>
))}
```

![marker](https://storage.googleapis.com/zenn-user-upload/af0c2783bd96-20250605.png)

### ç‰¹å®šã®åœ°åŸŸã‚’éè¡¨ç¤ºã«ã™ã‚‹

`geo.properties`ã«ã¯ã€å›½ã®åå‰ã‚„ISOã‚³ãƒ¼ãƒ‰ãªã©ã®æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚’ä½¿ã„ã¾ã™ã€‚

ä¾‹ãˆã°å—æ¥µã‚’éè¡¨ç¤ºã«ã—ãŸã„å ´åˆã€åœ°ç†ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã™ï¼š

```tsx
geographies
  .filter(geo => geo.properties.NAME !== 'Antarctica')
  .map(geo => (
    <Geography key={geo.rsmKey} geography={geo} />
  ))
```

### ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ã®è¿½åŠ 

åŒã˜ã‚ˆã†ã«ã€ãƒã‚¦ã‚¹ãƒ›ãƒãƒ¼ã§å›½åã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚`onClick`ã§ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã®å‡¦ç†ã‚‚æ›¸ã‘ã¾ã™ã€‚

```tsx
<Geography
  onClick={() => {
    console.log(geo.properties.NAME)
  }}
  onMouseEnter={() => {
    console.log(geo.properties.NAME)
  }}
  onMouseLeave={() => {
    // ãƒã‚¦ã‚¹ãŒé›¢ã‚ŒãŸæ™‚ã®å‡¦ç†
  }}
/>
```


## å›½ã”ã¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’å¯è¦–åŒ–ã™ã‚‹

ã“ã“ã‹ã‚‰ã¯å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ã€å„å›½ã®æ¸©å®¤åŠ¹æœã‚¬ã‚¹æ’å‡ºé‡ã‚’è‰²ã®æ¿ƒæ·¡ã§è¡¨ç¾ã™ã‚‹åœ°å›³ã‚’ä½œæˆã—ã¾ã™ã€‚

### ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™

[Climate Watch](https://www.climatewatchdata.org/ghg-emissions) ã‹ã‚‰æ¸©å®¤åŠ¹æœã‚¬ã‚¹æ’å‡ºé‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€CSV ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æº–å‚™ã—ã¾ã™ã€‚

CSVã®èª­ã¿è¾¼ã¿æ–¹æ³•ã«ã¤ã„ã¦ã¯ã“ã“ã§ã¯çœç•¥ã—ã¾ã™ãŒã€è©³ç´°ã¯[GitHub](https://github.com/melodyclue/zenn-world-map)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

å„å›½ã®åœ°ç†ãƒ‡ãƒ¼ã‚¿ã¨CSVãƒ‡ãƒ¼ã‚¿ã‚’ISOã‚³ãƒ¼ãƒ‰ã§ç…§åˆã—ã€SVGã®fillãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§æ’å‡ºé‡ã«å¿œã˜ãŸè‰²ã‚’é©ç”¨ã—ã¾ã™ã€‚

```tsx
<Geographies geography="/ne_10m_admin_0_countries.json">
  {({ geographies }) =>
    geographies.map(geo => {
      // CSVãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è©²å½“å›½ã‚’æ¤œç´¢ï¼ˆISO 3166-1 alpha-3 ã‚³ãƒ¼ãƒ‰ã§ç…§åˆï¼‰
      const cur = data.find(s => s.iso === geo.properties.ADM0_A3)
      const value = cur ? parseFloat(cur['2019']) : null

      return (
        <Geography
          key={geo.rsmKey}
          geography={geo}
          fill={value !== null ? colorScale(value) : '#e5e7eb'}
          stroke="#fff"
          strokeWidth={0.5}
          style={{
            default: { outline: 'none' },
            hover: { outline: 'none', fill: '#fbbf24' },
            pressed: { outline: 'none' },
          }}
        />
      )
    })
  }
</Geographies>
```

![world-map-with-data](https://storage.googleapis.com/zenn-user-upload/33cae4bd74cc-20250605.png)

## ã¾ã¨ã‚

`react-simple-maps`ã‚’ä½¿ã†ã“ã¨ã§ã€ç°¡å˜ã«ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªä¸–ç•Œåœ°å›³ã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã¾ã—ãŸï¼

## ã¡ãªã¿ã«

Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®Infrastructureã®åœ°å›³ã‚‚`react-simple-maps`ã§å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã—ãŸğŸ˜Š

![supabase-Infrastructure](https://storage.googleapis.com/zenn-user-upload/14b0d81feed6-20250605.png)



### å‚è€ƒãƒªãƒ³ã‚¯

- [Exampleãƒšãƒ¼ã‚¸](https://zenn-world-map.vercel.app/)
- [ä»Šå›ã®ãƒ¬ãƒã‚¸ãƒˆãƒª](https://github.com/melodyclue/zenn-world-map)
- [react-simple-maps å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.react-simple-maps.io/)
- [Natural Earthï¼ˆåœ°å›³ãƒ‡ãƒ¼ã‚¿ï¼‰](https://www.naturalearthdata.com/)
- [mapshaper](https://mapshaper.org/)
- [Climate Watchï¼ˆæ¸©å®¤åŠ¹æœã‚¬ã‚¹ãƒ‡ãƒ¼ã‚¿ï¼‰](https://www.climatewatchdata.org/)
